/*
	Stack View - The jQuery virtual stack plugin
	by The Harvard Library Innovation Lab
	
	Dual licensed under MIT and GPL.
*/

// Mixins and variables
@mixin rotate($deg) {
	-webkit-transform:rotate($deg);
	-moz-transform:rotate($deg);
	-o-transform:rotate($deg);
	-ms-transform:rotate($deg);
	transform:rotate($deg);
}

@mixin transform-origin($val) {
	-o-transform-origin:$val;
	-ms-transform-origin:$val;
	-moz-transform-origin:$val;
	-webkit-transform-origin:$val;
	transform-origin:$val;
}

@mixin skew($x, $y) {
	-webkit-transform:skew($x, $y);
	-moz-transform:skew($x, $y);
	-o-transform:skew($x, $y);
	-ms-transform:skew($x, $y);
	transform:skew($x, $y);
}

@mixin book-decoration($bg, $border) {
	.stack-pages {
		border-color:$border;
	}
	
	.stack-cover {
		border-color:$border;
		background:$bg;
	}
}

@mixin user-select($val) {
	-webkit-user-select:$val;
	-moz-user-select:$val;
	-ms-user-select:$val;
	user-select:$val;
}


// Styles
.stackview {
	font-family:"Helvetica Neue", sans-serif;
	position:relative;
	width:440px;
	height:520px;
	padding:0 0 0 65px;
	overflow:hidden;
	
	* {
		margin:0;
		padding:0;
	}
}

.stack-items {
	list-style:none;
	height:100%;
	overflow:auto;
	width:440px;
	padding-right:40px;
	
	&:before {
		background:url('images/bookEnd-prev.png');
		content:"";
		display:block;
		width:212px;
		height:114px;
		position:relative;
		z-index:99998; /* Must be bigger than the # of elements in stack */
	}
	
	&:after {
		content:"";
		display:block;
		width:212px;
		height:114px;
		background:url('images/bookEnd-next.png');
		margin:-7px 0 0 0;
	}
}

.stackview-placeholder {
	width:250px;
	background:url('images/placeholder.gif') no-repeat center center #ccd;
	border:1px solid #bbb;
	border-radius:3px;
	height:40px;
	position:relative;
	z-index:2;
}

.stack-item {
	position:relative;
	display:block;
	margin:0 0 2px 0;
	
	a {
		display:block;
		text-decoration:none;
		height:100%;
		background:url('images/gloss.png') repeat-x 0 47%;
		color:#fff;
		border-width:1px 2px;
		border-style:solid;
		white-space:nowrap;
		overflow:hidden;
		border-radius:3px / 20px;
	}
	
	&:hover, &:focus {
		background-image:url('images/highGloss.png');
		text-decoration:none;
	}
}

.spine-text {
	position:absolute;
	z-index:2;
	height:40px;
	line-height:40px;
	top:50%;
	margin-top:-7px;
	left:15px;
	right:24px;
	overflow:hidden;
	display:block;
}

.spine-title {
	float:left;
	font-size:13px;
	line-height:13px;
	vertical-align:middle;
}

.spine-author {
	float:right;
	font-size:10px;
	line-height:13px;
	vertical-align:middle;
	margin-right:6px;
}

.spine-year {
	position:absolute;
	z-index:3;
	top:50%;
	right:3px;
	width:28px;
	height:18px;
	line-height:18px;
	background:#f9fceb;
	font-size:9.5px;
	font-family:monospace;
	border-radius:2px;
	text-align:center;
	margin-top:-9px;
	border-width:0 1px;
	border-style:dotted;
	border-color:#e6dec4;
	text-shadow:none;
	color:#555;
	@include rotate(-90deg);
}

.stack-pages {
	position:absolute;
	z-index:4;
	display:block;
	width:10px;
	right:-6px;
	top:0;
	bottom:-4px;
	border-width:3px 0 3px 2px;
	border-style:solid;
	border-radius:4px 0 0 4px / 20px 0 0 20px;
	@include transform-origin(0 100%);
	@include skew(0deg,-20deg);
	
	&:after {
		position:absolute;
		content:"";
		left:0;
		right:2px;
		top:0;
		bottom:0;
		background:#f5f2e8;
		border-radius:3px 0 0 3px / 20px 0 0 20px;
		border-width:2px 1px 2px 0px;
		border-style:solid;
		border-color:#aaa #e5e5e5 #007acc #ddd;
	}
}

.stack-cover {
	position:absolute;
	z-index:3;
	height:2px;
	border-width:1px;
	border-style:solid;
	border-right-width:2px;
	top:-4px;
	left:0;
	right:5px;
	border-radius:4px 0 0 50px;
	overflow:visible;
	@include transform-origin(0 100%);
	@include skew(-70deg, 0deg);
}

/******************
   HEATMAP

   hottest = heat10
   coldest = heat1
*******************/
.stackview {
	.heat1 {
		$bg: #ccebff;
		$border: #adf;
		
		a {
			backround-color:$bg;
			background-image:url('images/superGloss.png');
			color:#222;
			text-shadow:0 1px 0 #fff;
			border-color:$border;
		}
		
		@include book-decoration($bg, $border);
	}
	
	.heat2 {
		$bg: #adf;
		$border: #88cfff;
		
		a {
			background-color:$bg;
			background-image:url('images/superGloss.png');
			color:#222;
			text-shadow:0 1px 0 #ddf1ff;
			border-color:$border;
		}
		
		@include book-decoration($bg, $border);
	}
	
	.heat3 {
		$bg: #77c9ff;
		$border: #59b6ef;
		
		a {
			background-color:$bg;
			background-image:url('images/highGloss.png');
			color:#111;
			text-shadow:0 1px 0 #adf;
			border-color:$border;
		}
		
		@include book-decoration($bg, $border);
	}
	
	.heat4 {
		$bg: #44b4ff;
		$border: #11a0ff;
		
		a {
			background-color:$bg;
			text-shadow:0 -1px 0 $border;
			border-color:$border;
		}
		
		@include book-decoration($bg, $border);
	}
	
	.heat5 {
		$bg: #22a7ff;
		$border: #008fee;
		
		a {
			background-color:$bg;
			text-shadow:0 -1px 0 $border;
			border-color:$border;
		}
		
		@include book-decoration($bg, $border);
	}
	
	.heat6 {
		$bg: #0099ff;
		$border: #007acc;
		
		a {
			background-color:$bg;
			text-shadow:0 -1px 0 #0085dd;
			border-color:$border;
		}
		
		@include book-decoration($bg, $border);
	}
	
	.heat7 {
		$bg: #0085dd;
		$border: #06a;
		
		a {
			background-color:$bg;
			text-shadow:0 -1px 0 #0070bb;
			border-color:$border;
		}
		
		@include book-decoration($bg, $border);
	}
	
	.heat8 {
		$bg: #0070bb;
		$border: #004777;
		
		a {
			background-color:$bg;
			text-shadow:0 -1px 0 #005c99;
			border-color:$border;
		}
		
		@include book-decoration($bg, $border);
	}
	
	.heat9 {
		$bg: #005c99;
		$border: #002944;
		
		a {
			background-color:$bg;
			text-shadow:0 -1px 0 #004777;
			border-color:$border;
		}
		
		@include book-decoration($bg, $border);
	}
	
	.heat10 {
		$bg: #004777;
		$border: #001522;
		
		a {
			background-color:$bg;
			text-shadow:0 -1px 0 #035;
			border-color:$border;
		}
		
		@include book-decoration($bg, $border);
	}
}


/**********
   RIBBON
***********/
.stackview .ribbon {
	position:absolute;
	z-index:99999; /* Must be bigger than the # of elements in stack */
	left:55px;
	right:10px;
	top:52px;
	padding:8px 10px 8px 22px;
	min-height:25px;
	font-size:20px;
	line-height:1.25;
	background:rgba(252,221,94,.85);
	color:#035;
	border:1px solid #fe4;
	border-radius:2px;
	@include user-select(none);
	
	&:after {
		content:"";
		position:absolute;
		bottom:-10px;
		left:0;
		background:url('images/ribbonTab.png') no-repeat 0 0;
		width:10px;
		height:10px;
	}
}


/**************
   NAVIGATION
***************/
.stack-navigation {
	position:absolute;
	left:5px;
	top:5px;
	width:41px;
	text-align:center;
	
	.upstream, .downstream {
		height:43px;
		text-indent:-999em;
		overflow:hidden;
	}
	
	.upstream {
		background:url('images/nav.png') 0 -87px no-repeat;
		
		&:hover, &:focus {
			background-position:0 -44px;
		}
		
		&:active {
			background-position:0 -1px;
		}
	}
	
	.downstream {
		background:url('images/nav.png') 0 -130px no-repeat;
		
		&:hover, &:focus {
			background-position:0 -173px;
		}
		
		&:active {
			background-position:0 -216px;
		}
	}
	
	.num-found {
		font-size:15px;
		line-height:16px;
		margin:10px 0;
		color:#09f;
		text-shadow: 0 1px 0 #ddd;
	}
}